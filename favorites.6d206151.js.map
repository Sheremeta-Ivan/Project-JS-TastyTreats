{"mappings":"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","sources":["src/favorites.js","src/js/utils/fav_list.js"],"sourcesContent":["import './js/utils/mobile-menu';\nimport renderItem from './js/renders/renders';\nimport './js/utils/modal-recipes';\nimport './js/utils/fav_list';","import renderItem from '../renders/renders';\nimport '/node_modules/tui-pagination/dist/tui-pagination.min.css'; \nimport startPagination from './pagination';\nimport { OpenModal } from './modal-recipes';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  favoriteCategoriesList: document.querySelector('.favorite-categories'),\n  favoriteRecipesList: document.querySelector('.favorite-list'),\n  warning: document.querySelector('.empty-storage'),\n  paginationBox: document.getElementById('pagination'),\n  allBtn: document.querySelector('.all-btn'),\n};\n\n\n\nlet currentBtn = '';\n\nconst calcPages = () => {\n  const screenWidth = window.innerWidth;\n  return screenWidth < 768 ? 9 : 12;\n};\n\nconst groupObjects = (array, groupSize) => {\n  const result = {};\n  for (let i = 0; i < array.length; i += groupSize) {\n    const groupName = Math.floor(i / groupSize) + 1;\n    result[groupName] = array.slice(i, i + groupSize);\n  }\n  return result;\n};\n\nconst onFavoritesRealod = () => {\n  const categoryMarkup = generateCategoryList();\n\n  const allCatBtn = `<button class=\"button-fav all-btn onActive\" name=\"all\">All categories</button>`;\n\n  const data = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  refs.favoriteRecipesList.innerHTML = '';\n  refs.favoriteCategoriesList.innerHTML = '';\n\n  if (data.length) {\n    refs.favoriteCategoriesList.innerHTML = `${allCatBtn}${categoryMarkup}`;\n  } else {\n    refs.allBtn.style.display = 'none';\n  }\n\n  generateStorageList();\n};\n\nconst generateStorageList = (pageSet = 1) => {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage) || [];\n\n  refs.allBtn.style.display = 'none';\n\n  if (data.length) {\n    refs.allBtn.style.display = 'block';\n\n    const perPage = calcPages();\n    const objData = groupObjects(data, perPage);\n    const totalPages = Object.keys(objData).length;\n\n    if (totalPages > 1) {\n      refs.paginationBox.style.display = 'block';\n      startPagination(pageSet, perPage, totalPages, generateStorageList);\n    } else {\n      refs.paginationBox.style.display = 'none';\n    }\n\n    const listMarkup = objData[pageSet].reduce(\n      (markup, { title, description, preview, rating, id, category }) =>\n        markup + renderItem(title, description, preview, rating, id, category),\n      ''\n    );\n\n    refs.favoriteRecipesList.innerHTML = listMarkup;\n    refs.warning.classList.add('is-hidden');\n  } else {\n    refs.warning.classList.remove('is-hidden');\n    refs.allBtn.classList.add('is-hidden');\n\n    if (window.innerWidth < 768) {\n      refs.hiroImg.classList.add('is-hidden');\n    }\n  }\n};\n\nconst generateCategoryList = () => {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage) || [];\n  if (data.length) {\n    return data\n      .flatMap((recipe) => recipe.category)\n      .filter((category, index, array) => array.indexOf(category) === index)\n      .reduce(\n        (categoryMarkup, category) => categoryMarkup + renderCategory(category),\n        ''\n      );\n  }\n  return '';\n};\n\nconst renderCategory = (category) => `<button class=\"button-fav\">${category}</button>`;\n\nconst filterByCategory = (evt) => {\n  if (evt.target.classList.contains('onActive')) return;\n\n  let data = [];\n  let categoryRecipes;\n  refs.favoriteRecipesList.innerHTML = '';\n\nif (evt.target.name === 'details') {\n    const recipeId = evt.target.dataset.id;\n    OpenModal(recipeId);\n  }\n\n\n  if (evt !== Number(evt) && evt.target.nodeName === 'BUTTON') {\n    setActiveClass(evt);\n    if (evt.target.name === 'all') return generateStorageList();\n    else currentBtn = evt.target.textContent;\n  }\n\n  const storage = localStorage.getItem('favorites');\n  data = JSON.parse(storage) || [];\n\n  if (!data.length) {\n    refs.favoriteCategoriesList.style.display = 'none';\n    return;\n  }\n\n  categoryRecipes = [...data.filter((recipe) => recipe.category === currentBtn)];\n\n  let pageSet = 1;\n\n  if (Number(evt) === evt) pageSet = evt;\n\n  const perPage = calcPages();\n  const objData = groupObjects(categoryRecipes, perPage);\n  const totalPages = Object.keys(objData).length;\n\n  if (totalPages > 1) {\n    refs.paginationBox.style.display = 'block';\n    startPagination(pageSet, perPage, totalPages, filterByCategory);\n  } else {\n    refs.paginationBox.style.display = 'none';\n  }\n\n  const listMarkup = objData[pageSet].reduce(\n    (markup, { title, description, preview, rating, id, category }) =>\n      markup + renderItem(title, description, preview, rating, id, category),\n    ''\n  );\n\n  refs.favoriteRecipesList.innerHTML = listMarkup;\n};\n\nconst setActiveClass = (evt) => {\n  const activeBtn = document.querySelector('.onActive');\n  if (activeBtn) activeBtn.classList.remove('onActive');\n  evt.target.classList.add('onActive');\n};\n\ndocument.addEventListener('DOMContentLoaded', onFavoritesRealod);\n\nrefs.favoriteCategoriesList.addEventListener('click', filterByCategory);\n\n"],"names":["parcelRequire","$8nrFW","$5b919d578b5c9b1b$var$refs","favoriteCategoriesList","document","querySelector","favoriteRecipesList","warning","paginationBox","getElementById","allBtn","$5b919d578b5c9b1b$var$currentBtn","$5b919d578b5c9b1b$var$calcPages","window","innerWidth","$5b919d578b5c9b1b$var$groupObjects","array","groupSize","result","i","length","Math","floor","slice","$5b919d578b5c9b1b$var$generateStorageList","pageSet","arguments","storage","localStorage","getItem","data","JSON","parse","style","display","perPage","objData","totalPages","Object","keys","$5IDkG","default","listMarkup","reduce","markup","param","title","description","preview","rating","id","category","$7Mtae","innerHTML","classList","add","remove","hiroImg","$5b919d578b5c9b1b$var$generateCategoryList","flatMap","recipe","filter","index","indexOf","categoryMarkup","$5b919d578b5c9b1b$var$renderCategory","concat","$5b919d578b5c9b1b$var$filterByCategory","evt","target","contains","categoryRecipes","name","recipeId","dataset","$6PU4E","OpenModal","Number","nodeName","$5b919d578b5c9b1b$var$setActiveClass","textContent","$parcel$interopDefault","activeBtn","addEventListener"],"version":3,"file":"favorites.6d206151.js.map"}