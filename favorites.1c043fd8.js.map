{"mappings":"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","sources":["src/favorites.js","src/js/utils/fav_list.js"],"sourcesContent":["import './js/utils/mobile-menu';\nimport './js/utils/modal-recipes';\nimport './js/utils/order-now-modal';\nimport './js/utils/fav_list';\n","import renderItem, { ratingScale } from '../renders/renders';\nimport startPagination from './pagination';\nimport { OpenModal } from './modal-recipes';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  favoriteCategoriesList: document.querySelector('.favorite-categories'),\n  favoriteRecipesList: document.querySelector('.favorite-list'),\n  warning: document.querySelector('.empty-storage'),\n  paginationBox: document.getElementById('pagination'),\n  allBtn: document.querySelector('.all-btn'),\n};\n\nlet currentCategory = '';\n\nconst calcPages = () => {\n  const screenWidth = window.innerWidth;\n  return screenWidth < 768 ? 9 : 12;\n};\n\nconst groupObjects = (array, groupSize) => {\n  const result = {};\n  for (let i = 0; i < array.length; i += groupSize) {\n    const groupName = Math.floor(i / groupSize) + 1;\n    result[groupName] = array.slice(i, i + groupSize);\n  }\n  return result;\n};\n\nconst onFavoritesReload = () => {\n  const categoryMarkup = generateCategoryList();\n  const allCatBtn = `<button class=\"button-fav all-btn\" name=\"all\">All categories</button>`;\n\n  const data = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  refs.favoriteRecipesList.innerHTML = '';\n  refs.favoriteCategoriesList.innerHTML = '';\n\n  if (data.length) {\n    refs.favoriteCategoriesList.innerHTML = `${allCatBtn}${categoryMarkup}`;\n  } else {\n    refs.allBtn.style.display = 'none';\n  }\n\n  generateStorageList();\n};\n\nconst generateStorageList = (pageSet = 1) => {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage) || [];\n\n  refs.allBtn.style.display = 'none';\n\n  if (data.length) {\n    refs.allBtn.style.display = 'block';\n\n    const perPage = calcPages();\n    const objData = groupObjects(data, perPage);\n    const totalPages = Object.keys(objData).length;\n\n    if (totalPages > 1) {\n      refs.paginationBox.style.display = 'block';\n      startPagination(pageSet, perPage, totalPages, generateStorageList);\n    } else {\n      refs.paginationBox.style.display = 'none';\n    }\n\n    let filteredData;\n    if (currentCategory === '') {\n     \n      filteredData = data;\n    } else {\n     \n      filteredData = data.filter((recipe) => recipe.category === currentCategory);\n    }\n\n    const listMarkup = filteredData.reduce(\n      (markup, { title, description, preview, rating, id, category }) =>\n        markup + renderItem(title, description, preview, rating, id, category),\n      ''\n    );\n\n    refs.favoriteRecipesList.innerHTML = listMarkup;\n\n    const favoriteButtons = document.querySelectorAll('.favorite-btn');\n    favoriteButtons.forEach((button) => {\n      button.onclick = () => handleFavoriteButtonClick(button);\n    });\n\n    const seeRecipeButtons = document.querySelectorAll('.item-rec');\n    seeRecipeButtons.forEach((seeRecipeButton) => {\n      seeRecipeButton.addEventListener('click', () => {\n        OpenModal(seeRecipeButton);\n      });\n    });\n\n    refs.warning.classList.add('is-hidden');\n  } else {\n    refs.warning.classList.remove('is-hidden');\n    refs.allBtn.classList.add('is-hidden');\n  }\n\n  if (data.length === 0) {\n    refs.warning.classList.remove('is-hidden');\n    refs.paginationBox.style.display = 'none';\n    refs.favoriteCategoriesList.innerHTML = '';\n    refs.allBtn.style.display = 'none';\n  } else {\n    refs.warning.classList.add('is-hidden');\n  }\n};\n\n\nconst generateCategoryList = () => {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage) || [];\n  if (data.length) {\n    return data\n      .flatMap((recipe) => recipe.category)\n      .filter((category, index, array) => array.indexOf(category) === index)\n      .reduce(\n        (categoryMarkup, category) => categoryMarkup + renderCategory(category),\n        ''\n      );\n  }\n  return '';\n};\n\nconst renderCategory = (category) => `<button class=\"button-fav\">${category}</button>`;\n\nconst filterByCategory = (evt) => {\n  if (evt.target.nodeName === 'BUTTON') {\n    if (evt.target.name === 'all') {\n      currentCategory = ''; \n      setActiveClass(evt.target); \n    } else {\n      currentCategory = evt.target.textContent; \n      setActiveClass(evt.target); \n    }\n\n    generateStorageList();\n  }\n};\n\nconst setActiveClass = (targetButton) => {\n  const allCatBtn = document.querySelector('.all-btn');\n  const categoryButtons = document.querySelectorAll('.button-fav');\n\n  categoryButtons.forEach((button) => {\n    if (button === targetButton) {\n      button.classList.add('onActive');\n    } else {\n      button.classList.remove('onActive');\n    }\n  });\n\n  allCatBtn.classList.remove('onActive');\n};\n\nconst handleFavoriteButtonClick = (button) => {\n  const infoRecipe = JSON.parse(button.dataset.info);\n  const storage = localStorage.getItem('favorites');\n  let data = JSON.parse(storage) || [];\n\n  const recipeIndex = data.findIndex(recipe => recipe.id === infoRecipe.id);\n\n  if (recipeIndex !== -1) {\n    const removedRecipeCategory = data[recipeIndex].category;\n    data.splice(recipeIndex, 1);\n    localStorage.setItem('favorites', JSON.stringify(data));\n\n\n    const remainingData = JSON.parse(localStorage.getItem('favorites')) || [];\n    const otherRecipesInCategory = remainingData.some(\n      recipe => recipe.category === removedRecipeCategory\n    );\n\n    if (!otherRecipesInCategory) {\n\n      const recipeCards = document.querySelectorAll('.item');\n      recipeCards.forEach(card => {\n        if (card.dataset.category === removedRecipeCategory) {\n          card.remove();\n        }\n      });\n\n\n      const categoryButtons = refs.favoriteCategoriesList.querySelectorAll('.button-fav');\n      categoryButtons.forEach(categoryButton => {\n        if (categoryButton.textContent === removedRecipeCategory) {\n          categoryButton.remove();\n        }\n      });\n    }\n  }\n\n\n  const remainingData = JSON.parse(localStorage.getItem('favorites')) || [];\n  if (remainingData.length === 0) {\n    refs.favoriteRecipesList.innerHTML = '';\n    refs.allBtn.style.display = 'none';\n    refs.warning.classList.remove('is-hidden');\n    refs.paginationBox.style.display = 'none';\n    refs.favoriteCategoriesList.innerHTML = '';\n  } else {\n    generateStorageList();\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', onFavoritesReload);\nrefs.favoriteCategoriesList.addEventListener('click', filterByCategory);\n"],"names":["parcelRequire","$7Mtae","$5b919d578b5c9b1b$var$refs","favoriteCategoriesList","document","querySelector","favoriteRecipesList","warning","paginationBox","getElementById","allBtn","$5b919d578b5c9b1b$var$currentCategory","$5b919d578b5c9b1b$var$calcPages","window","innerWidth","$5b919d578b5c9b1b$var$groupObjects","array","groupSize","result","i","length","Math","floor","slice","$5b919d578b5c9b1b$var$generateStorageList","pageSet","arguments","storage","localStorage","getItem","data","JSON","parse","style","display","perPage","objData","totalPages","Object","keys","$5IDkG","default","listMarkup","filter","recipe","category","reduce","markup","param","title","description","preview","rating","id","innerHTML","favoriteButtons","querySelectorAll","forEach","button","onclick","$5b919d578b5c9b1b$var$handleFavoriteButtonClick","seeRecipeButtons","seeRecipeButton","addEventListener","$6PU4E","OpenModal","classList","add","remove","$5b919d578b5c9b1b$var$generateCategoryList","flatMap","index","indexOf","categoryMarkup","$5b919d578b5c9b1b$var$renderCategory","concat","$5b919d578b5c9b1b$var$setActiveClass","targetButton","allCatBtn","infoRecipe","dataset","info","recipeIndex","findIndex","removedRecipeCategory","splice","setItem","stringify","some","card","categoryButton","textContent","evt","target","nodeName","name"],"version":3,"file":"favorites.1c043fd8.js.map"}