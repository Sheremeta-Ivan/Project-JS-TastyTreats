{"mappings":"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","sources":["src/favorites.js","src/js/utils/fav_list.js"],"sourcesContent":["import './js/utils/mobile-menu';\nimport './js/utils/modal-recipes';\nimport './js/utils/order-now-modal';\nimport './js/utils/fav_list';\n","import renderItem, { ratingScale } from '../renders/renders';\nimport startPagination from './pagination';\nimport { OpenModal } from './modal-recipes';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  favoriteCategoriesList: document.querySelector('.favorite-categories'),\n  favoriteRecipesList: document.querySelector('.favorite-list'),\n  warning: document.querySelector('.empty-storage'),\n  paginationBox: document.getElementById('pagination'),\n  allBtn: document.querySelector('.all-btn'),\n};\n\nlet currentCategory = '';\n\nconst calcPages = () => {\n  const screenWidth = window.innerWidth;\n  return screenWidth < 768 ? 9 : 12;\n};\n\nconst groupObjects = (array, groupSize) => {\n  const result = {};\n  for (let i = 0; i < array.length; i += groupSize) {\n    const groupName = Math.floor(i / groupSize) + 1;\n    result[groupName] = array.slice(i, i + groupSize);\n  }\n  return result;\n};\n\nconst onFavoritesReload = () => {\n  const categoryMarkup = generateCategoryList();\n\n  const allCatBtn = `<button class=\"button-fav all-btn onActive\" name=\"all\">All categories</button>`;\n\n  const data = JSON.parse(localStorage.getItem('favorites')) || [];\n\n  refs.favoriteRecipesList.innerHTML = '';\n  refs.favoriteCategoriesList.innerHTML = '';\n\n  if (data.length) {\n    refs.favoriteCategoriesList.innerHTML = `${allCatBtn}${categoryMarkup}`;\n  } else {\n    refs.allBtn.style.display = 'none';\n  }\n\n  generateStorageList();\n};\n\nconst generateStorageList = (pageSet = 1) => {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage) || [];\n\n  refs.allBtn.style.display = 'none';\n\n  if (data.length) {\n    refs.allBtn.style.display = 'block';\n\n    const perPage = calcPages();\n    const objData = groupObjects(data, perPage);\n    const totalPages = Object.keys(objData).length;\n\n    if (totalPages > 1) {\n      refs.paginationBox.style.display = 'block';\n      startPagination(pageSet, perPage, totalPages, generateStorageList);\n    } else {\n      refs.paginationBox.style.display = 'none';\n    }\n\n    const listMarkup = objData[pageSet].reduce(\n      (markup, { title, description, preview, rating, id, category }) =>\n        markup + renderItem(title, description, preview, rating, id, category),\n      ''\n    );\n\n    refs.favoriteRecipesList.innerHTML = listMarkup;\n\n    const favoriteButtons = document.querySelectorAll('.favorite-btn');\n    favoriteButtons.forEach(button => {\n      button.onclick = () => handleFavoriteButtonClick(button);\n    });\n\n    const seeRecipeButtons = document.querySelectorAll('.item-rec');\n    seeRecipeButtons.forEach(seeRecipeButton => {\n      seeRecipeButton.addEventListener('click', () => {\n        OpenModal(seeRecipeButton);\n      });\n    });\n\n    refs.warning.classList.add('is-hidden');\n  } else {\n    refs.warning.classList.remove('is-hidden');\n    refs.allBtn.classList.add('is-hidden');\n\n    // if (window.innerWidth < 768) {\n    //   refs.hiroImg.classList.add('is-hidden');\n    // }\n  }\n\n\n  if (data.length === 0) {\n    refs.warning.classList.remove('is-hidden');\n    refs.paginationBox.style.display = 'none';\n    refs.favoriteCategoriesList.innerHTML = '';\n    refs.allBtn.style.display = 'none';\n  } else {\n    refs.warning.classList.add('is-hidden');\n  }\n};\n\nconst generateCategoryList = () => {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage) || [];\n  if (data.length) {\n    return data\n      .flatMap((recipe) => recipe.category)\n      .filter((category, index, array) => array.indexOf(category) === index)\n      .reduce(\n        (categoryMarkup, category) => categoryMarkup + renderCategory(category),\n        ''\n      );\n  }\n  return '';\n};\n\nconst renderCategory = (category) => `<button class=\"button-fav\">${category}</button>`;\n\nconst filterByCategory = (evt) => {\n  if (evt.target.classList.contains('onActive')) return;\n\n  let data = [];\n  let categoryRecipes;\n  refs.favoriteRecipesList.innerHTML = '';\n\n  if (evt !== Number(evt) && evt.target.nodeName === 'BUTTON') {\n    setActiveClass(evt);\n    if (evt.target.name === 'all') return generateStorageList();\n    else currentCategory = evt.target.textContent;\n  }\n\n  const storage = localStorage.getItem('favorites');\n  data = JSON.parse(storage) || [];\n\n  if (!data.length) {\n    refs.favoriteCategoriesList.style.display = 'none';\n    return;\n  }\n\n  categoryRecipes = [...data.filter((recipe) => recipe.category === currentCategory)];\n\n  let pageSet = 1;\n\n  if (Number(evt) === evt) pageSet = evt;\n\n  const perPage = calcPages();\n  const objData = groupObjects(categoryRecipes, perPage);\n  const totalPages = Object.keys(objData).length;\n\n  if (totalPages > 1) {\n    refs.paginationBox.style.display = 'block';\n    startPagination(pageSet, perPage, totalPages, filterByCategory);\n  } else {\n    refs.paginationBox.style.display = 'none';\n  }\n\n  const listMarkup = objData[pageSet].reduce(\n    (markup, { title, description, preview, rating, id, category }) =>\n      markup + renderItem(title, description, preview, rating, id, category),\n    ''\n  );\n\n  refs.favoriteRecipesList.innerHTML = listMarkup;\n\n  const favoriteButtons = document.querySelectorAll('.favorite-btn');\n  favoriteButtons.forEach(button => {\n    button.onclick = () => handleFavoriteButtonClick(button);\n  });\n};\n\nconst setActiveClass = (evt) => {\n  const activeBtn = document.querySelector('.onActive');\n  if (activeBtn) activeBtn.classList.remove('onActive');\n  evt.target.classList.add('onActive');\n};\n\n\nconst handleFavoriteButtonClick = (button) => {\n  const infoRecipe = JSON.parse(button.dataset.info);\n  const storage = localStorage.getItem('favorites');\n  let data = JSON.parse(storage) || [];\n\n  const recipeIndex = data.findIndex(recipe => recipe.id === infoRecipe.id);\n\n  if (recipeIndex !== -1) {\n    const removedRecipeCategory = data[recipeIndex].category;\n    data.splice(recipeIndex, 1);\n    localStorage.setItem('favorites', JSON.stringify(data));\n\n\n    const remainingData = JSON.parse(localStorage.getItem('favorites')) || [];\n    const otherRecipesInCategory = remainingData.some(\n      recipe => recipe.category === removedRecipeCategory\n    );\n\n    if (!otherRecipesInCategory) {\n\n      const recipeCards = document.querySelectorAll('.item');\n      recipeCards.forEach(card => {\n        if (card.dataset.category === removedRecipeCategory) {\n          card.remove();\n        }\n      });\n\n\n      const categoryButtons = refs.favoriteCategoriesList.querySelectorAll('.button-fav');\n      categoryButtons.forEach(categoryButton => {\n        if (categoryButton.textContent === removedRecipeCategory) {\n          categoryButton.remove();\n        }\n      });\n    }\n  }\n\n\n  const remainingData = JSON.parse(localStorage.getItem('favorites')) || [];\n  if (remainingData.length === 0) {\n    refs.favoriteRecipesList.innerHTML = '';\n    refs.allBtn.style.display = 'none';\n    refs.warning.classList.remove('is-hidden');\n    refs.paginationBox.style.display = 'none';\n    refs.favoriteCategoriesList.innerHTML = '';\n  } else {\n    generateStorageList();\n  }\n};\n\ndocument.addEventListener('DOMContentLoaded', onFavoritesReload);\nrefs.favoriteCategoriesList.addEventListener('click', filterByCategory);\n"],"names":["parcelRequire","$cYlGq","$b1011e18e6733bf7$var$refs","favoriteCategoriesList","document","querySelector","favoriteRecipesList","warning","paginationBox","getElementById","allBtn","$b1011e18e6733bf7$var$currentCategory","$b1011e18e6733bf7$var$calcPages","window","innerWidth","$b1011e18e6733bf7$var$groupObjects","array","groupSize","result","i","length","Math","floor","slice","$b1011e18e6733bf7$var$generateStorageList","pageSet","storage","localStorage","getItem","data","JSON","parse","style","display","perPage","objData","totalPages","Object","keys","$JcIhZ","default","listMarkup","reduce","markup","title","description","preview","rating","id","category","innerHTML","querySelectorAll","forEach","button","onclick","$b1011e18e6733bf7$var$handleFavoriteButtonClick","seeRecipeButton","addEventListener","$2LJO6","OpenModal","classList","add","remove","$b1011e18e6733bf7$var$generateCategoryList","flatMap","recipe","filter","index","indexOf","categoryMarkup","$b1011e18e6733bf7$var$renderCategory","$b1011e18e6733bf7$var$filterByCategory","evt","target","contains","categoryRecipes","Number","nodeName","$b1011e18e6733bf7$var$setActiveClass","name","textContent","activeBtn","infoRecipe","dataset","info","recipeIndex","findIndex","removedRecipeCategory","splice","setItem","stringify","some","card","categoryButton"],"version":3,"file":"favorites.d1a6f68d.js.map"}